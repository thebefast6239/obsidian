---
tags:
  - "#unversity-databases"
создал заметку: 2024-10-31
---
##### Отношение, заголовок, тело
Отношения ==совместимы== по типу, если они имеют одинаковые заголовки.
Отношение R является объединением двух совместимых по типу отношений R₁, R₂, если оно содержит все элементы исходных отношений исключая повторения.

Заголовок R совпадает с заголовками R₁ и R₂.
Тело R состоит из кортежей, принадлежащим или R₁, или R₂, или обоим отношениям одновременно.

##### Синтаксис объединения
* ==R₁ union R₂, R₁ ⋃ R₂==
**Отношение** R является пересечением двух совместимых по типу отношений R₁ и R₂, если оно содержит кортежи, которые одновременно принадлежат обоим исходным отношениям.
**Заголовок** R совпадает с заголовками R₁ и R₂.
**Тело** R состоит из кортежей принадлежащих R₁ и R₂ одновременно

* ==R₁ intersect R₂, R₁ ⋂ R₂==
**Отношение** R является вычитанием двух совместных по типу отношений  R₁ и R₂, если оно содержит все кортежи, которые принадлежат  R₁ и не принадлежат R₂.
**Заголовок** R совпадает с заголовками  R₁ и R₂.
**Тело** R состоит из всех кортежей  ∈R₁ и ∉R₂.

* ==R₁ minus R₂==
**Отношение** R является декартовым произведением двух отношений A и B, если его заголовок является сцеплением заголовков A и B, а тело состоит из кортежей являющихся сцеплением отношений A и B.
Если **A**(A₁, A₂, ...,  Aₙ), **B**(B₁, B₂, ...,  Bₙ)
Заголовок R(a₁, a₂, ...,  aₙ, b₁, b₂, ...,  bₙ )
Тело R состоит из кортежей (a₁, a₂, ...,  aₙ, b₁, b₂, ...,  bₙ ) таких,
что (a₁, a₂, ...,  aₙ)∈A, (b₁, b₂, ...,  bₙ)∈B.

**Мощность декартова произведения** R равна произведению мощности отношений A и B.
Если в отношении A и B есть одноименные атрибуты, то перед выполнением операции такие атрибуты необходимо переименовать. Перемножить любые 2 отношения.

* ==R₁ TIMES R₂==
**Отношение** R является выборкой отношения A, если его заголовок совпадает с заголовком A, а тело состоит из кортежей, удовлетворяющих истинности логического выражения, которое задано формулой **C**.
В простейшем случае C имеет вид X⊗Y, где X и Y - атрибуты отношения A или скаляр значения, ⊗ - один из операторов сравнения (=, ≠, ≤,  ≥, <, >).
Это **θ** (*theta*) выборка.

В общем случае можно использовать имена атрибутов, логические операции (NOT,AND,OR), константы, скобки и операции сравнения.

* ==A where C, A where X⊗Y==
**Проекцией** отношения A по атрибутам A₁, A₂, ...,  Aₘ, где каждый из атрибутов принадлежит назывному отношению R с заголовками A₁, A₂, ...,  Aₘ и телом, которое содержит кортежи A без дубликатов.
Проекция
	 R(A₁, A₂, ...,  Aₘ)
	 (a₁, a₂, ...,  aₘ)
	 в A найдутся кортежи (A₁, a₁, A₂, a₂, ...,  Aₘ, aₘ)
Операция проекции дает "вертикальный срез" отношению, в котором удалены все возникающие при таком срезе дубликаты кортежей.*
A\[A₁, A₂, ...,  Aₘ]

**Делением** отношения A(A₁, A₂, ...,  Aₙ , B₁, B₂, ...,  Bₘ), и **B**(B₁, B₂, ...,  Bₘ) называют отношение R(A₁, A₂, ...,  Aₙ) с телом (a₁, a₂, ...,  aₘ) таким, что для всех (b₁, b₂, ...,  bₘ)∈B в A найдется кортеж (a₁, a₂, ...,  aₙ, b₁, b₂, ...,  bₘ)
R(A₁, A₂, ...,  Aₙ) - где A - делимое, B - делитель.

- ==A DIVIDE B==
- ==A DIVIDEBY B==
**Отношение** R является соединением отношений  R₁ и R₂ по заданному C условно, если его можно получить с помощью декартова произведения  R₁ и R₂ с применением к полученному результату выборки по условию C.

##### Общая операция соединения
1) ⊗ - соединение
2) Экви-соединение*
3) Естественное соединение
- ==(A×B) WHERE C==
- ==(A TIMES B) WHERE C==
**C** = логическое выражение, которое может содержать имена атрибутов, логические операции, константы, скобки и операции сравнения.

###### ⊗ - соединение
- ==(A×B) WHERE X⊗Y==
- ==(A TIMES B) WHERE X⊗Y==
- ==A [X⊗Y] B==
x - атрибут A, y - атрибут B
⊗ - один из операторов сравнения (=, ≠, ≤,  ≥, <, >).
###### Экви-соединение
Частный случай ⊗ соединения
- ==(A TIMES B) WHERE  X=Y, A[X=Y]B ==
###### Естественное соединение
- ==A JOIN B==
По всем одинаковым атрибутам.
A(A₁, A₂, ...,  Aₙ , X₁, X₂, ...,  Xₚ)
B(X₁, X₂, ...,  Xₚ , B₁, B₂, ...,  Bₘ),
R(A₁, A₂, ...,  Aₙ , X₁, X₂, ...,  Xₚ, B₁, B₂, ...,  Bₘ)
~~(a₁, a₂, ...,  aₙ, x₁, x₂, ...,  xₚ, b₁, b₂, ...,  bₘ)~~\* ???
если (a₁, a₂, ...,  aₙ, x₁, x₂, ...,  xₚ)∈A и (x₁, x₂, ...,  xₚ, b₁, b₂, ...,  bₘ)∈B.
